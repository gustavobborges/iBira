DROP DATABASE IF EXISTS IDRINK;
CREATE DATABASE IDRINK;
USE IDRINK;

CREATE TABLE TIPOUSUARIO (
	IDTIPOUSUARIO INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(50) NOT NULL
);

CREATE TABLE USUARIO (
	IDUSUARIO INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    SOBRENOME VARCHAR(100),
    EMAIL VARCHAR(100) NOT NULL,
    SENHA VARCHAR(50) NOT NULL,
    IDTIPOUSUARIO INT NOT NULL,
    FOREIGN KEY (IDTIPOUSUARIO) REFERENCES TIPOUSUARIO (IDTIPOUSUARIO)
);

CREATE TABLE VENDEDOR (
	IDVENDEDOR INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    CIDADE VARCHAR(100),
    BAIRRO VARCHAR(100),
    ENDERECO VARCHAR(255),
    LOCALIZACAO VARCHAR(100),
    DDD INT(3),
    TELEFONE INT(10),
    DESCRICAO VARCHAR(255),
    FOTO MEDIUMBLOB,
    IDUSUARIO INT NOT NULL,
    FOREIGN KEY (IDUSUARIO) REFERENCES USUARIO (IDUSUARIO)
    );
    
CREATE TABLE TIPOBEBIDA (
	IDTIPOBEBIDA INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(50) NOT NULL
);

CREATE TABLE TAMANHO (
	IDTAMANHO INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    TIPO VARCHAR(50)
);

CREATE TABLE PRODUTO (
	IDPRODUTO INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	IDTIPOBEBIDA INT NOT NULL,
    IDTAMANHO INT NOT NULL,
    NOME VARCHAR(100) NOT NULL,
    VALOR DOUBLE NOT NULL,
    FOTO MEDIUMBLOB,
    IDVENDEDOR INT NOT NULL,
    FOREIGN KEY (IDTAMANHO) REFERENCES TAMANHO (IDTAMANHO),
    FOREIGN KEY (IDTIPOBEBIDA) REFERENCES TIPOBEBIDA (IDTIPOBEBIDA),
    FOREIGN KEY (IDVENDEDOR) REFERENCES VENDEDOR (IDVENDEDOR)
    );